<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng nhập</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./dangnhap.css">
</head>

<body>
    <div class="left-form">
        <form action="" class="loginForm form">
            <h1 style="text-align: center;font-family:Arial, Helvetica, sans-serif;margin: 0px;">Đăng nhập</h1>
            <div class="inputs-wrapper">
                <div class="form-input-group">
                    <i class="fa-solid fa-user"></i>
                    <input type="text" placeholder="Username" class="userNlogin">
                </div>
                <div class="form-input-group">
                    <i class="fa-solid fa-user"></i>
                    <input type="password" placeholder="Enter your password" class="passlogin">
                </div>
                <button type="submit" value="Register" class="loginbtn">
                    submit
                </button>
            </div>
        </form>
    </div>

    <script>
        let userNlogin = document.querySelector('.userNlogin');
        let passwordLogin = document.querySelector('.passlogin');
        let loginButton = document.querySelector('.loginbtn');

        loginButton.addEventListener('click', (e, inputUsername, inputPassword) => {
            e.preventDefault();
            let userdata = localStorage.getItem("userdata");
            let parsedData = JSON.parse(userdata);
            let password = '';
            let username = '';
            inputUsername = userNlogin.value;
            inputPassword = passwordLogin.value;

            if (inputUsername == '' || inputPassword == '') {
                alert('điền vào chỗ trống');
                return;
            }
            else {
                let passwordArrayLength = parsedData.passwords.length;
                for (let i = 0; i < passwordArrayLength; i++) {
                    password = parsedData.passwords[i];
                    if (password == inputPassword) {
                        break;
                    }
                }
                let usernameArrayLength = parsedData.passwords.length;
                for (let i = 0; i < usernameArrayLength; i++) {
                    username = parsedData.usernames[i];
                    if (username == inputUsername) {
                        break;
                    }
                }
                checkPasswordMatch(username, password, inputUsername, inputPassword);

            }
        })
        function checkPasswordMatch(userName, password, inputUsername, inputPassword) {
            /*
            (userName == inputUsername && password == inputPassword) ?

                alert('đăng nhập thành công') ://else//
                alert('đăng nhập thất bại');
                */
            if (userName == inputUsername && password == inputPassword) {
                alert('đăng nhập thành công')
                window.location.href = "portfolio.html";
            }
            else {
                alert('đăng nhập thất bại');
            }
        }       
    </script>
</body>

</html>

